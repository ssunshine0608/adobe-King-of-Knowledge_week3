<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Adobe çŸ¥è­˜ç‹ Week3</title>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #050510;
      overflow: hidden;            /* âœ… æ•´é ä¸å…è¨±ä¸Šä¸‹æ»¾ */
      overscroll-behavior: none;
      -webkit-text-size-adjust: 100%;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", sans-serif;
    }

    #root { height: 100%; }

    .fullbg {
      position: fixed;
      inset: 0;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      transform: translateZ(0);
      z-index: -2;
    }
    .bg-dim {
      position: fixed;
      inset: 0;
      background: radial-gradient(1200px 900px at 50% 10%, rgba(0,0,0,0.10), rgba(0,0,0,0.70));
      z-index: -1;
      pointer-events: none;
    }

    .safe-wrap{
      height: 100svh;
      height: 100dvh;
      padding-top: calc(10px + var(--safe-top));
      padding-bottom: calc(10px + var(--safe-bottom));
      padding-left: calc(10px + var(--safe-left));
      padding-right: calc(10px + var(--safe-right));
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .enter-down { animation: enterDown 520ms cubic-bezier(.2,.9,.2,1) both; }
    @keyframes enterDown {
      from { transform: translateY(-18px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }
    .exit-left { animation: exitLeft 420ms cubic-bezier(.3,.0,.2,1) both; }
    @keyframes exitLeft {
      from { transform: translateX(0); opacity: 1; }
      to   { transform: translateX(-28px); opacity: 0; }
    }

    /* âœ… é¡Œç›®åœ–ç‰‡å€ï¼šå›ºå®šåœ¨è¢å¹•å…§ï¼Œä¸è¦æŠŠé«˜åº¦æ’çˆ† */
    .img-fit {
      width: 100%;
      max-height: calc(100dvh - 170px); /* header + æŒ‰éˆ•å€é ç•™ */
      object-fit: contain;
      display: block;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none; /* è®“é»æ“Šè½åœ¨ç†±å€ä¸Š */
    }

    /* âœ… 4 å€‹é€æ˜é»é¸å€ï¼ˆå·¦ä¸Š/å³ä¸Š/å·¦ä¸‹/å³ä¸‹ï¼‰ */
    .hotspot {
      position: absolute;
      border-radius: 18px;
      background: rgba(255,255,255,0.00);
      transition: background 120ms ease, outline 120ms ease;
      outline: 2px solid rgba(255,255,255,0);
      -webkit-tap-highlight-color: transparent;
    }
    .hotspot:active { background: rgba(255,255,255,0.10); }
    .hotspot.selected { outline: 2px solid rgba(255,255,255,0.95); background: rgba(255,255,255,0.08); }

    /* è§£æé æ‰‹é¢¨ç´ï¼šä¸è®“æ•´é æ»¾ï¼Œç”¨æŠ˜ç–Šæ¶ˆåŒ–é«˜åº¦ */
    .accordion-body {
      white-space: pre-line;
      line-height: 1.55;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    const ASSETS = {
      bg: "./background.jpg",
      cover: "./fengmian.jpg",
      qimg: ["./q1.jpg","./q2.jpg","./q3.jpg","./q4.jpg","./q5.jpg"],
    };

    const PANTONE_PAST_URL = "https://www.pantone.com/color-of-the-year";
    const MUST_FULL_SCORE_TO_REDEEM = true;

    const QUESTIONS = [
      {
        title: "Q1ï½œä»¥ä¸‹å“ªä¸€å¥— Adobe è»Ÿé«”ï¼Œä¸»è¦ç”¨é€”ã€Œä¸æ˜¯ã€ç”¨ä¾†è£½ä½œéœæ…‹åœ–ç‰‡ï¼Ÿ",
        options: ["A","B","C","D"],
        answerIndex: 3,
        answerText: "D. Adobe After Effects",
        explanation:
`Photoshopã€Illustrator èˆ‡ Express ä¸»è¦ç”¨æ–¼å½±åƒã€æ’ç•«èˆ‡è¦–è¦ºè¨­è¨ˆï¼Œ
è€Œ After Effects å‰‡å°ˆæ³¨æ–¼å‹•ç•«èˆ‡å‹•æ…‹å½±åƒè£½ä½œï¼Œ
ä¸¦éä»¥éœæ…‹åœ–ç‰‡ç‚ºä¸»è¦æ‡‰ç”¨å ´æ™¯ã€‚`
      },
      {
        title: "Q2ï½œAdobe èˆ‡ Runway çš„åˆä½œå…§å®¹ï¼Œä»¥ä¸‹å“ªä¸€é …æœ‰æåŠï¼Ÿ",
        options: ["A","B","C","D"],
        answerIndex: 2,
        answerText: "C. å°‡ Runway Gen-4.5 æ•´åˆè‡³ Firefly",
        explanation:
`Adobe å®£å¸ƒèˆ‡ Runway å±•é–‹ç­–ç•¥åˆä½œï¼Œ
ä¸¦å°‡å…¶æœ€æ–°çš„ Gen-4.5 å½±ç‰‡æ¨¡å‹æ•´åˆè‡³ Fireflyï¼Œ
ä»¥å¼·åŒ–å½±ç‰‡ç”Ÿæˆèˆ‡å‰µä½œæµç¨‹çš„æ‡‰ç”¨å½ˆæ€§ã€‚`
      },
      {
        title: "Q3ï½œä»¥ä¸‹å“ªä¸€é …ã€Œä¸æ˜¯ã€Adobe Firefly ç›®å‰æ•´åˆçš„åˆä½œç”Ÿæˆæ¨¡å‹ä¾†æºï¼Ÿ",
        options: ["A","B","C","D"],
        answerIndex: 3,
        answerText: "D. Midjourney",
        explanation:
`Firefly ä¸¦éåªä½¿ç”¨å–®ä¸€æ¨¡å‹ï¼Œ
è€Œæ˜¯æ•´åˆå¤šæ–¹ç”Ÿæˆæ¨¡å‹ä¾†å› æ‡‰ä¸åŒå‰µä½œéœ€æ±‚ã€‚
Midjourney å‰‡ç‚ºç¨ç«‹å¹³å°ï¼Œæœªæ•´åˆæ–¼ Firefly ä¸­ã€‚`
      },
      {
        title: "Q4ï½œé—œæ–¼ Adobe Firefly çš„ç”Ÿæˆå…§å®¹ï¼Œä¸‹åˆ—å“ªä¸€é …ã€Œä¸å±¬æ–¼ã€å…¶ä¸»è¦ç¯„ç–‡ï¼Ÿ",
        options: ["A","B","C","D"],
        answerIndex: 0,
        answerText: "A. è©¦ç®—è¡¨æ•¸æ“šåˆ†æ",
        explanation:
`Firefly ä¸»è¦èšç„¦æ–¼å‰µæ„èˆ‡è¦–è¦ºç›¸é—œçš„ç”Ÿæˆå…§å®¹ï¼Œ
åŒ…å«åœ–ç‰‡ã€å‘é‡åœ–å½¢èˆ‡æ–‡å­—è¦–è¦ºæ•ˆæœï¼Œ
ä¸¦éç”¨æ–¼è³‡æ–™è™•ç†æˆ–æ•¸æ“šåˆ†æç”¨é€”ã€‚`
      },
      {
        title: "Q5ï½œPantone å…¬å¸ƒçš„ 2026 å¹´åº¦ä»£è¡¨è‰²åç¨±ç‚ºä½•ï¼Ÿ",
        options: ["A","B","C","D"],
        answerIndex: 1,
        answerText: "B. Cloud Dancerï¼ˆé›²ä¸Šèˆç™½ï¼‰",
        explanation:
`Pantone æ¯å¹´éƒ½æœƒå…¬å¸ƒä¸€æ¬¾å¹´åº¦ä»£è¡¨è‰²ã€‚
2026 å¹´åº¦ä»£è¡¨è‰²ç‚º Cloud Dancerï¼ˆé›²ä¸Šèˆç™½ï¼‰ã€‚
å…¶ä»–é¸é …ä¸­ï¼š
2022 å¹´åº¦ä»£è¡¨è‰²ï¼šVery Periï¼ˆé•·æ˜¥èŠ±è—ï¼‰
2023 å¹´åº¦ä»£è¡¨è‰²ï¼šViva Magentaï¼ˆéå‡¡æ´‹ç´…ï¼‰
2024 å¹´åº¦ä»£è¡¨è‰²ï¼šPeach Fuzzï¼ˆæŸ”å’Œæ¡ƒï¼‰`
      },
    ];

    function App(){
      const [page, setPage] = useState("cover"); // cover | quiz | review | result
      const [qIndex, setQIndex] = useState(0);
      const [answers, setAnswers] = useState(Array(QUESTIONS.length).fill(null));
      const [isLeaving, setIsLeaving] = useState(false);
      const [openExplain, setOpenExplain] = useState(0);

      const score = useMemo(() => {
        return answers.reduce((acc, v, i) => acc + (v === QUESTIONS[i].answerIndex ? 1 : 0), 0);
      }, [answers]);

      useEffect(() => {
        (async () => {
          try {
            if (!window.liff) return;
            const LIFF_ID = "2008592497-M8lBAPJW";
            await liff.init({ liffId: LIFF_ID });
            await new Promise(r => setTimeout(r, 80));
            if (liff.isInClient()) liff.expand();
          } catch (e) {}
        })();
      }, []);

      function go(next){
        setIsLeaving(true);
        setTimeout(() => {
          setIsLeaving(false);
          setPage(next);
        }, 420);
      }

      function startQuiz(){
        setAnswers(Array(QUESTIONS.length).fill(null));
        setQIndex(0);
        setOpenExplain(0);
        go("quiz");
      }

      function pick(idx){
        const next = answers.slice();
        next[qIndex] = idx;
        setAnswers(next);
      }

      function nextQ(){
        if (qIndex < QUESTIONS.length - 1){
          setIsLeaving(true);
          setTimeout(() => {
            setIsLeaving(false);
            setQIndex(qIndex + 1);
          }, 420);
        } else {
          go("review");
        }
      }

      function prevQ(){
        if (qIndex === 0) return;
        setIsLeaving(true);
        setTimeout(() => {
          setIsLeaving(false);
          setQIndex(qIndex - 1);
        }, 420);
      }

      const pageClass = (isLeaving ? "exit-left" : "enter-down");
      const currentPicked = answers[qIndex];

      return (
        <>
          <div className="fullbg" style={{ backgroundImage: `url(${ASSETS.bg})` }} />
          <div className="bg-dim" />

          <div className="safe-wrap">
            <div className={"w-full max-w-[520px] " + pageClass}>

              {page === "cover" && (
                <Card tight>
                  <div className="relative w-full rounded-[26px] overflow-hidden shadow-2xl">
                    <img src={ASSETS.cover} className="w-full h-auto block" alt="cover" />
                    <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"></div>

                    <div className="absolute bottom-4 left-4 right-4">
                      <div className="text-white text-2xl font-extrabold tracking-tight">
                        Adobe çŸ¥è­˜ç‹ Week3
                      </div>
                      <div className="text-white/85 mt-1 text-sm">
                        5 é¡Œå¿«å•å¿«ç­”ï¼Œç›´æ¥é»æ’åœ–é¸é …ä½œç­”
                      </div>

                      <div className="mt-3">
                        <Btn primary onClick={startQuiz}>é–‹å§‹æŒ‘æˆ° â–¶</Btn>
                      </div>
                    </div>
                  </div>
                </Card>
              )}

              {page === "quiz" && (
                <Card>
                  <div className="flex items-center justify-between">
                    <div className="text-white/90 text-sm font-semibold">
                      {qIndex + 1}/{QUESTIONS.length}
                    </div>
                    <div className="text-white/80 text-sm">
                      å¾—åˆ†ï¼š{score}
                    </div>
                  </div>

                  <div className="mt-2 text-white font-extrabold leading-snug">
                    {QUESTIONS[qIndex].title}
                  </div>

                  {/* âœ… é¡Œç›®åœ–æ»¿ç‰ˆ + 4 é»é¸ç†±å€ */}
                  <div className="mt-3 relative w-full rounded-2xl overflow-hidden shadow-lg bg-black/20">
                    <img src={ASSETS.qimg[qIndex]} className="img-fit" alt={"q"+(qIndex+1)} />

                    {/* å·¦ä¸Š A */}
                    <button
                      className={"hotspot " + (currentPicked===0 ? "selected" : "")}
                      onClick={() => pick(0)}
                      style={{ left:"4%", top:"6%", width:"44%", height:"40%" }}
                      aria-label="é¸ A"
                    />
                    {/* å³ä¸Š B */}
                    <button
                      className={"hotspot " + (currentPicked===1 ? "selected" : "")}
                      onClick={() => pick(1)}
                      style={{ right:"4%", top:"6%", width:"44%", height:"40%" }}
                      aria-label="é¸ B"
                    />
                    {/* å·¦ä¸‹ C */}
                    <button
                      className={"hotspot " + (currentPicked===2 ? "selected" : "")}
                      onClick={() => pick(2)}
                      style={{ left:"4%", bottom:"6%", width:"44%", height:"40%" }}
                      aria-label="é¸ C"
                    />
                    {/* å³ä¸‹ D */}
                    <button
                      className={"hotspot " + (currentPicked===3 ? "selected" : "")}
                      onClick={() => pick(3)}
                      style={{ right:"4%", bottom:"6%", width:"44%", height:"40%" }}
                      aria-label="é¸ D"
                    />

                    {/* å°æç¤º */}
                    <div className="absolute top-2 right-2 text-xs font-bold px-2 py-1 rounded-full bg-black/40 text-white/90">
                      ç›´æ¥é»é¸æ’åœ–ä½œç­”
                    </div>
                  </div>

                  <div className="mt-4 flex gap-3">
                    <Btn onClick={prevQ} disabled={qIndex===0}>â† ä¸Šä¸€é¡Œ</Btn>
                    <Btn primary onClick={nextQ} disabled={answers[qIndex]===null}>
                      {qIndex===QUESTIONS.length-1 ? "çœ‹è§£æ â–¶" : "ä¸‹ä¸€é¡Œ â–¶"}
                    </Btn>
                  </div>
                </Card>
              )}

              {page === "review" && (
                <Card>
                  <div className="text-white text-xl font-extrabold">æ•´å¼µè§£æ</div>
                  <div className="text-white/80 text-sm mt-1">
                    å…ˆè¡å®Œ 5 é¡Œå†ä¸€æ¬¡å°ç­”æ¡ˆçš„çˆ½æ„Ÿä¿ç•™ ğŸ˜
                  </div>

                  <div className="mt-4 grid gap-2">
                    {QUESTIONS.map((q, i) => {
                      const ok = answers[i] === q.answerIndex;
                      const open = openExplain === i;
                      return (
                        <div key={i} className="rounded-2xl bg-white/10 overflow-hidden border border-white/10">
                          <button
                            className="w-full px-4 py-3 flex items-center justify-between gap-3 text-left"
                            onClick={() => setOpenExplain(open ? -1 : i)}
                          >
                            <div className="text-white font-bold">
                              Q{i+1} {ok ? "âœ…" : "âŒ"}
                            </div>
                            <div className="text-white/75 text-sm">
                              {open ? "æ”¶èµ·" : "å±•é–‹"}
                            </div>
                          </button>

                          {open && (
                            <div className="px-4 pb-4">
                              <div className="text-white/90 text-sm">
                                <span className="font-semibold">æ­£ç¢ºç­”æ¡ˆï¼š</span>{q.answerText}
                              </div>
                              <div className="mt-2 text-white/75 text-sm accordion-body">
                                <span className="font-semibold text-white/90">è§£æï¼š</span>{"\n"}{q.explanation}
                              </div>
                            </div>
                          )}
                        </div>
                      );
                    })}
                  </div>

                  <div className="mt-4 flex flex-col sm:flex-row gap-3">
                    <Btn onClick={() => window.open(PANTONE_PAST_URL, "_blank")}>
                      æ¢ç´¢å¾€å¹´ä»£è¡¨è‰²
                    </Btn>
                    <Btn primary onClick={() => go("result")}>çœ‹çµæœ â–¶</Btn>
                  </div>
                </Card>
              )}

              {page === "result" && (
                <Card>
                  <div className="text-center">
                    <div className="text-white text-2xl font-extrabold">
                      ä½ çš„å¾—åˆ†ï¼š{score} / {QUESTIONS.length}
                    </div>

                    {MUST_FULL_SCORE_TO_REDEEM ? (
                      score === QUESTIONS.length ? (
                        <div className="text-emerald-300 mt-2 font-semibold">
                          æ»¿åˆ†é”æˆï¼å¯ä»¥é ˜ç âœ…
                        </div>
                      ) : (
                        <div className="text-rose-300 mt-2 font-semibold">
                          å·®ä¸€é»é»ï½å†ç©ä¸€æ¬¡æ‹¿æ»¿åˆ†å°±èƒ½é ˜çï¼
                        </div>
                      )
                    ) : (
                      <div className="text-white/80 mt-2">æ„Ÿè¬æŒ‘æˆ°ï¼</div>
                    )}
                  </div>

                  <div className="mt-4 grid gap-3">
                    <Btn primary onClick={() => go("cover")}>å†ç©ä¸€æ¬¡ â–¶</Btn>

                    <Btn onClick={() => window.open(PANTONE_PAST_URL, "_blank")}>
                      æ¢ç´¢å¾€å¹´ä»£è¡¨è‰²
                    </Btn>

                    {MUST_FULL_SCORE_TO_REDEEM && (
                      <Btn
                        disabled={score !== QUESTIONS.length}
                        onClick={() => alert("æŠŠé€™è£¡æ›æˆä½  week2 çš„å…Œç/åˆ†äº«æµç¨‹å³å¯")}
                      >
                        {score === QUESTIONS.length ? "åˆ†äº«ä¸¦é ˜å–çå‹µ" : "éœ€æ»¿åˆ†æ‰å¯é ˜ç"}
                      </Btn>
                    )}
                  </div>
                </Card>
              )}

            </div>
          </div>
        </>
      );
    }

    function Card({ children, tight }){
      return (
        <div className={"mx-auto bg-black/35 backdrop-blur-md rounded-[28px] shadow-2xl border border-white/10 " + (tight ? "p-0" : "p-5")}>
          {children}
        </div>
      );
    }

    function Btn({ children, onClick, disabled, primary }){
      return (
        <button
          onClick={onClick}
          disabled={disabled}
          className={
            "w-full rounded-2xl px-4 py-3 font-extrabold transition active:scale-[0.99] " +
            (primary
              ? "bg-white text-black shadow-lg hover:shadow-xl"
              : "bg-white/14 text-white hover:bg-white/20") +
            (disabled ? " opacity-50 cursor-not-allowed" : "")
          }
        >
          {children}
        </button>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
