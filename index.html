<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Adobe çŸ¥è­˜ç‹ Week3</title>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
      --safe-left: env(safe-area-inset-left, 0px);
      --safe-right: env(safe-area-inset-right, 0px);
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #050510;
      overflow: hidden;
      overscroll-behavior: none;
      -webkit-text-size-adjust: 100%;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", sans-serif;
    }
    #root { height: 100%; }

    .fullbg {
      position: fixed;
      inset: 0;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      transform: translateZ(0);
      will-change: transform;
      z-index: -2;
    }
    .bg-dim {
      position: fixed;
      inset: 0;
      background: radial-gradient(1200px 900px at 50% 10%, rgba(0,0,0,0.08), rgba(0,0,0,0.72));
      z-index: -1;
      pointer-events: none;
    }

    .safe-wrap{
      height: 100svh;
      height: 100dvh;
      padding-top: calc(12px + var(--safe-top));
      padding-bottom: calc(12px + var(--safe-bottom));
      padding-left: calc(12px + var(--safe-left));
      padding-right: calc(12px + var(--safe-right));
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Week2 æ‰‹æ„Ÿï¼šé€²å ´ä¸‹æ»‘ / é€€å ´å·¦æ»‘ */
    .enter-down { animation: enterDown 520ms cubic-bezier(.2,.9,.2,1) both; }
    @keyframes enterDown { from { transform: translateY(-18px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .exit-left { animation: exitLeft 420ms cubic-bezier(.3,.0,.2,1) both; }
    @keyframes exitLeft { from { transform: translateX(0); opacity: 1; } to { transform: translateX(-28px); opacity: 0; } }

    /* ä¸»åœ–åƒæ»¿å¡ç‰‡ */
    .img-fit {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none;
    }

    /* é»æ“Šç†±å€ï¼šæ²¿ç”¨ Week2ã€Œæ ¡æº–å¥½çš„å¤§å€å¡Šã€ */
    .hit {
      position: absolute;
      border-radius: 18px;
      background: rgba(255,255,255,0);
      outline: 2px solid rgba(255,255,255,0);
      transition: background 120ms ease, outline 120ms ease;
      -webkit-tap-highlight-color: transparent;
    }
    .hit:active { background: rgba(255,255,255,0.12); }
    .hit.selected { outline: 2px solid rgba(255,255,255,0.95); background: rgba(255,255,255,0.06); }

    /* è§£æé å¡ç‰‡å…§æ»¾ï¼ˆå¤–å±¤ä¸æ»¾ï¼Œç•«é¢å›ºå®šï¼‰ */
    .inner-scroll {
      max-height: calc(100dvh - 210px);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      padding-right: 2px;
    }
    .inner-scroll::-webkit-scrollbar { width: 6px; }
    .inner-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.18); border-radius: 999px; }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    /***************
     * ä½ çš„æª”æ¡ˆï¼ˆrepo æ ¹ç›®éŒ„ï¼‰
     ***************/
    const ASSETS = {
      bg: "./background.jpg",
      cover: "./fengmian.jpg",
      qimg: ["./q1.jpg","./q2.jpg","./q3.jpg","./q4.jpg","./q5.jpg"],
    };

    const PANTONE_PAST_URL = "https://www.pantone.com/color-of-the-year";

    /***************
     * âœ… Week2 æ ¡æº–å¥½çš„é»æ“Šå€ï¼ˆä½ è²¼çš„ï¼‰
     * é€™æ˜¯ã€Œé¸é …å€ã€çš„å¤§ç¯„åœï¼Œç„¶å¾Œå†åˆ‡æˆ A/B/C/D å››æ¢
     ***************/
    const INIT_TOP = 38;     // %
    const INIT_HEIGHT = 42;  // %
    const INIT_LEFT = 8;     // %
    const INIT_WIDTH = 85;   // %

    /***************
     * é¡Œåº«ï¼šåªéœ€è¦æ­£è§£ index + è§£ææ–‡å­—ï¼ˆé¡Œç›®éƒ½åœ¨åœ–ä¸Šï¼Œä¸é¡¯ç¤ºæ–‡å­—ï¼‰
     * é¸é …é †åºï¼šA=0 B=1 C=2 D=3
     ***************/
    const QUESTIONS = [
      {
        answerIndex: 3,
        answerText: "D. Adobe After Effects",
        explanation:
`Photoshopã€Illustrator èˆ‡ Express ä¸»è¦ç”¨æ–¼å½±åƒã€æ’ç•«èˆ‡è¦–è¦ºè¨­è¨ˆï¼Œ
è€Œ After Effects å‰‡å°ˆæ³¨æ–¼å‹•ç•«èˆ‡å‹•æ…‹å½±åƒè£½ä½œï¼Œ
ä¸¦éä»¥éœæ…‹åœ–ç‰‡ç‚ºä¸»è¦æ‡‰ç”¨å ´æ™¯ã€‚`
      },
      {
        answerIndex: 2,
        answerText: "C. å°‡ Runway Gen-4.5 æ•´åˆè‡³ Firefly",
        explanation:
`Adobe å®£å¸ƒèˆ‡ Runway å±•é–‹ç­–ç•¥åˆä½œï¼Œ
ä¸¦å°‡å…¶æœ€æ–°çš„ Gen-4.5 å½±ç‰‡æ¨¡å‹æ•´åˆè‡³ Fireflyï¼Œ
ä»¥å¼·åŒ–å½±ç‰‡ç”Ÿæˆèˆ‡å‰µä½œæµç¨‹çš„æ‡‰ç”¨å½ˆæ€§ã€‚`
      },
      {
        answerIndex: 3,
        answerText: "D. Midjourney",
        explanation:
`Firefly ä¸¦éåªä½¿ç”¨å–®ä¸€æ¨¡å‹ï¼Œ
è€Œæ˜¯æ•´åˆå¤šæ–¹ç”Ÿæˆæ¨¡å‹ä¾†å› æ‡‰ä¸åŒå‰µä½œéœ€æ±‚ã€‚
Midjourney å‰‡ç‚ºç¨ç«‹å¹³å°ï¼Œæœªæ•´åˆæ–¼ Firefly ä¸­ã€‚`
      },
      {
        answerIndex: 0,
        answerText: "A. è©¦ç®—è¡¨æ•¸æ“šåˆ†æ",
        explanation:
`Firefly ä¸»è¦èšç„¦æ–¼å‰µæ„èˆ‡è¦–è¦ºç›¸é—œçš„ç”Ÿæˆå…§å®¹ï¼Œ
åŒ…å«åœ–ç‰‡ã€å‘é‡åœ–å½¢èˆ‡æ–‡å­—è¦–è¦ºæ•ˆæœï¼Œ
ä¸¦éç”¨æ–¼è³‡æ–™è™•ç†æˆ–æ•¸æ“šåˆ†æç”¨é€”ã€‚`
      },
      {
        answerIndex: 1,
        answerText: "B. Cloud Dancerï¼ˆé›²ä¸Šèˆç™½ï¼‰",
        explanation:
`Pantone æ¯å¹´éƒ½æœƒå…¬å¸ƒä¸€æ¬¾å¹´åº¦ä»£è¡¨è‰²ã€‚
2026 å¹´åº¦ä»£è¡¨è‰²ç‚º Cloud Dancerï¼ˆé›²ä¸Šèˆç™½ï¼‰ã€‚
å…¶ä»–é¸é …ä¸­ï¼š
2022 å¹´åº¦ä»£è¡¨è‰²ï¼šVery Periï¼ˆé•·æ˜¥èŠ±è—ï¼‰
2023 å¹´åº¦ä»£è¡¨è‰²ï¼šViva Magentaï¼ˆéå‡¡æ´‹ç´…ï¼‰
2024 å¹´åº¦ä»£è¡¨è‰²ï¼šPeach Fuzzï¼ˆæŸ”å’Œæ¡ƒï¼‰`
      },
    ];

    function App() {
      const [gameState, setGameState] = useState("start"); // start | playing | review | result
      const [currentQIndex, setCurrentQIndex] = useState(0);
      const [answers, setAnswers] = useState(Array(QUESTIONS.length).fill(null));

      const [isLeaving, setIsLeaving] = useState(false);

      // âœ… æ¯é¡Œ 20 åˆ† â†’ æ»¿åˆ† 100
      const score = useMemo(() => {
        const correct = answers.reduce((acc, v, i) => acc + (v === QUESTIONS[i].answerIndex ? 1 : 0), 0);
        return correct * 20;
      }, [answers]);
      const isPerfect = score === 100;

      // âœ… LIFF expandï¼ˆä¸å½±éŸ¿é LIFF ç€è¦½ï¼‰
      useEffect(() => {
        (async () => {
          try {
            if (!window.liff) return;
            const LIFF_ID = "2008592497-M8lBAPJW";
            await liff.init({ liffId: LIFF_ID });
            await new Promise(r => setTimeout(r, 80));
            if (liff.isInClient()) liff.expand();
          } catch (e) {}
        })();
      }, []);

      function go(next){
        setIsLeaving(true);
        setTimeout(() => {
          setIsLeaving(false);
          setGameState(next);
        }, 420);
      }

      function startGame(){
        setAnswers(Array(QUESTIONS.length).fill(null));
        setCurrentQIndex(0);
        go("playing");
      }

      function pickAnswer(idx){
        const next = answers.slice();
        next[currentQIndex] = idx;
        setAnswers(next);
      }

      function nextQ(){
        if (currentQIndex < QUESTIONS.length - 1){
          setIsLeaving(true);
          setTimeout(() => {
            setIsLeaving(false);
            setCurrentQIndex(currentQIndex + 1);
          }, 420);
        } else {
          go("review"); // âœ… å…¨éƒ¨åšå®Œæ‰çœ‹æ•´å¼µè§£æ
        }
      }

      function prevQ(){
        if (currentQIndex === 0) return;
        setIsLeaving(true);
        setTimeout(() => {
          setIsLeaving(false);
          setCurrentQIndex(currentQIndex - 1);
        }, 420);
      }

      const pageClass = isLeaving ? "exit-left" : "enter-down";
      const picked = answers[currentQIndex];

      // âœ… Week2 ç†±å€ï¼šåœ¨ä¸€å€‹å¤§æ¡†å…§åˆ‡ 4 æ¢ï¼ˆä¸Šä¸‹å››é¸ï¼‰
      // ä½ è‹¥ Week2 æ˜¯å·¦å³æ’åˆ—ï¼Œæˆ‘ä¹Ÿèƒ½ä¸€ç§’æ”¹æˆåˆ‡å››æ ¼ï¼ˆä½†ç›®å‰ç…§ä½ è²¼çš„é‚£å¥—æœ€å¸¸è¦‹ç‰ˆï¼‰
      const HITBOX = {
        left: INIT_LEFT,
        top: INIT_TOP,
        width: INIT_WIDTH,
        height: INIT_HEIGHT,
      };
      const ROW_GAP = 2.2; // %ï¼šé¸é …é–“è·å¾®èª¿ï¼ˆä¸å½±éŸ¿å¤§æ¡†ï¼‰
      const rowH = (HITBOX.height - ROW_GAP*3) / 4;

      function hitStyle(rowIndex){
        return {
          left: HITBOX.left + "%",
          width: HITBOX.width + "%",
          top: (HITBOX.top + rowIndex * (rowH + ROW_GAP)) + "%",
          height: rowH + "%",
        };
      }

      return (
        <>
          <div className="fullbg" style={{ backgroundImage: `url(${ASSETS.bg})` }} />
          <div className="bg-dim" />

          <div className="safe-wrap">
            <div className={"w-full max-w-[520px] " + pageClass}>

              {/* âœ… å°é¢ï¼šä¸æ”¾é¡å¤–é–‹å§‹æŒ‰éˆ•ï¼ˆæ•´å¼µå°é¢å¯é»ï¼‰ */}
              {gameState === "start" && (
                <Card tight>
                  <button
                    onClick={startGame}
                    className="relative w-full rounded-[26px] overflow-hidden shadow-2xl block"
                    style={{ WebkitTapHighlightColor: "transparent" }}
                    aria-label="é–‹å§‹éŠæˆ²"
                  >
                    <img src={ASSETS.cover} className="w-full h-auto block" alt="cover" />
                  </button>
                </Card>
              )}

              {/* âœ… é¡Œç›®é ï¼šåªæœ‰é¡Œç›®åœ– + ç²¾æº–ç†±å€ï¼ˆä¸é¡å¤–æ–‡å­—ï¼‰ */}
              {gameState === "playing" && (
                <Card>
                  <div className="flex items-center justify-between">
                    <div className="text-white/90 text-sm font-extrabold">
                      {currentQIndex + 1}/{QUESTIONS.length}
                    </div>
                    <div className="text-white/70 text-sm">
                      åˆ†æ•¸ï¼š{score}
                    </div>
                  </div>

                  <div className="mt-3 relative w-full rounded-2xl overflow-hidden shadow-lg bg-black/20"
                       style={{ aspectRatio: "9 / 16" }}>
                    <img src={ASSETS.qimg[currentQIndex]} className="img-fit" alt={"q"+(currentQIndex+1)} />

                    {/* A */}
                    <button
                      className={"hit " + (picked===0 ? "selected" : "")}
                      style={hitStyle(0)}
                      onClick={() => pickAnswer(0)}
                      aria-label="é¸é … A"
                    />
                    {/* B */}
                    <button
                      className={"hit " + (picked===1 ? "selected" : "")}
                      style={hitStyle(1)}
                      onClick={() => pickAnswer(1)}
                      aria-label="é¸é … B"
                    />
                    {/* C */}
                    <button
                      className={"hit " + (picked===2 ? "selected" : "")}
                      style={hitStyle(2)}
                      onClick={() => pickAnswer(2)}
                      aria-label="é¸é … C"
                    />
                    {/* D */}
                    <button
                      className {"hit " + (picked===3 ? "selected" : "")}
                      style={hitStyle(3)}
                      onClick={() => pickAnswer(3)}
                      aria-label="é¸é … D"
                    />
                  </div>

                  <div className="mt-4 flex gap-3">
                    <Btn secondary onClick={prevQ} disabled={currentQIndex===0}>â† ä¸Šä¸€é¡Œ</Btn>
                    <Btn primary onClick={nextQ} disabled={answers[currentQIndex]===null}>
                      {currentQIndex===QUESTIONS.length-1 ? "çœ‹è§£æ â–¶" : "ä¸‹ä¸€é¡Œ â–¶"}
                    </Btn>
                  </div>
                </Card>
              )}

              {/* âœ… è§£æé ï¼šæ•´å¼µæœ€å¾Œä¸€æ¬¡çœ‹ï¼ˆä¸æ”¾ Pantone æŒ‰éˆ•ï¼‰ */}
              {gameState === "review" && (
                <Card>
                  <div className="text-white text-xl font-extrabold">æ•´å¼µè§£æ</div>
                  <div className="text-white/80 text-sm mt-1">
                    å…ˆç©å®Œå†ä¸€æ¬¡çœ‹è§£æ âœ¨
                  </div>

                  <div className="mt-4 inner-scroll grid gap-3">
                    {QUESTIONS.map((q, i) => {
                      const ok = answers[i] === q.answerIndex;
                      return (
                        <div key={i} className="rounded-2xl bg-white/10 p-4 border border-white/10">
                          <div className="flex items-start justify-between gap-3">
                            <div className="text-white font-extrabold">Q{i+1}</div>
                            <div className={
                              "shrink-0 text-xs font-extrabold px-2 py-1 rounded-full " +
                              (ok ? "bg-emerald-400 text-black" : "bg-rose-400 text-black")
                            }>
                              {ok ? "ç­”å°" : "ç­”éŒ¯"}
                            </div>
                          </div>

                          <div className="mt-2 text-white/90 text-sm">
                            <span className="font-semibold">æ­£ç¢ºç­”æ¡ˆï¼š</span>{q.answerText}
                          </div>

                          <div className="mt-2 text-white/75 text-sm whitespace-pre-line leading-relaxed">
                            <span className="font-semibold text-white/90">è§£æï¼š</span>{"\n"}{q.explanation}
                          </div>
                        </div>
                      );
                    })}
                  </div>

                  <div className="mt-4">
                    <Btn primary onClick={() => go("result")}>çœ‹çµæœ â–¶</Btn>
                  </div>
                </Card>
              )}

              {/* âœ… çµæœé ï¼šä¸‰é¡†æŒ‰éˆ•ï¼ˆæ–‡æ¡ˆ/é †åº/åº•è‰²ä¾ä½ æŒ‡å®š) */}
              {gameState === "result" && (
                <Card>
                  <div className="text-center">
                    <div className="text-white text-2xl font-extrabold">
                      ä½ çš„å¾—åˆ†ï¼š{score} / 100
                    </div>

                    {isPerfect ? (
                      <div className="text-emerald-300 mt-2 font-semibold">
                        æ»¿åˆ†é”æˆï¼å¯ä»¥é ˜ç âœ…
                      </div>
                    ) : (
                      <div className="text-rose-300 mt-2 font-semibold">
                        éœ€æ»¿åˆ†æ‰å¯é ˜ç
                      </div>
                    )}
                  </div>

                  <div className="mt-4 grid gap-3">
                    {/* 1) ğŸåˆ†äº«ä¸¦é ˜å–çå‹µï¼ˆæ»¿åˆ†æ‰å¯é»ï¼‰ */}
                    <Btn
                      primary
                      disabled={!isPerfect}
                      onClick={() => alert("æŠŠé€™è£¡æ›æˆä½  Week2 ç©©å®šç‰ˆçš„åˆ†äº«/é ˜çæµç¨‹å³å¯")}
                    >
                      {isPerfect ? "ğŸåˆ†äº«ä¸¦é ˜å–çå‹µ" : "éœ€æ»¿åˆ†æ‰å¯é ˜ç"}
                    </Btn>

                    {/* 2) æ¢ç´¢æ›´å¤š PANTONE å¹´åº¦ä»£è¡¨è‰² */}
                    <Btn secondary onClick={() => window.open(PANTONE_PAST_URL, "_blank")}>
                      æ¢ç´¢æ›´å¤šPANTONEå¹´åº¦ä»£è¡¨è‰²
                    </Btn>

                    {/* 3) å†ç©ä¸€æ¬¡ */}
                    <Btn secondary onClick={() => go("start")}>
                      å†ç©ä¸€æ¬¡ â–¶
                    </Btn>
                  </div>
                </Card>
              )}

            </div>
          </div>
        </>
      );
    }

    function Card({ children, tight }){
      return (
        <div className={"mx-auto bg-black/35 backdrop-blur-md rounded-[28px] shadow-2xl border border-white/10 " + (tight ? "p-0" : "p-5")}>
          {children}
        </div>
      );
    }

    function Btn({ children, onClick, disabled, primary, secondary }){
      const base =
        "w-full rounded-2xl px-4 py-3 font-extrabold transition active:scale-[0.99] " +
        (disabled ? "opacity-50 cursor-not-allowed " : "");
      const cls = primary
        ? "bg-white text-black shadow-lg hover:shadow-xl"
        : "bg-white/16 text-white hover:bg-white/22"; // âœ… secondary ä¹Ÿæœ‰åº•è‰²
      return (
        <button onClick={onClick} disabled={disabled} className={base + cls}>
          {children}
        </button>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
